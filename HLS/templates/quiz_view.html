
<!DOCTYPE html>
<html lang="en">
<head>
    {% load static  %}
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>


</head>
<body>
    This can be the page that can be seen by students with a chart

    <div class="answerChart" style="min-width: 310px; height: 700px; margin: 0 auto"></div>
    click <a href="/home">here</a> to return back to dashboard

    <script>
        $(function () {
            $(document).ready(function () {
                Highcharts.setOptions({
                    global: {
                        useUTC: false
                    }
                });

                $('.answerChart').highcharts({
                    chart: {
                        type: 'column',
                        animation: Highcharts.svg, // don't animate in old IE
                        marginRight: 100,
                        events: {
                            load: function () {

                                // set up the updating of the chart each second
                                var series = this.series[0];
                                setInterval(function () {
                                    var jText = '{ "A":' + (Math.floor(Math.random() * (20 - 0 + 1)) + 0) + ',' +
                                            '"B":' + (Math.floor(Math.random() * (20 - 0 + 1)) + 0) + ',' +
                                            '"C":' + (Math.floor(Math.random() * (20 - 0 + 1)) + 0) + ',' +
                                            '"D":' + (Math.floor(Math.random() * (20 - 0 + 1)) + 0) +'}';

                                    var jObj = JSON.parse(jText);
                                    console.log(jObj);
                                    var A_Answers = 0;
                                    var B_Answers = 0;
                                    var C_Answers = 0;
                                    var D_Answers = 0;
                                    $.each( jObj, function( key, val ) {
                                        if(key=="A")A_Answers=parseInt(val);
                                        if(key=="B")B_Answers=parseInt(val);
                                        if(key=="C")C_Answers=parseInt(val);
                                        if(key=="D")D_Answers=parseInt(val);
                                    });

                                    series.setData([A_Answers, B_Answers,C_Answers,D_Answers],true,false,true);
//                                    $.getJSON( "answers.json", function( data ) {
//
//                                        var A_Answers = 0;
//                                        var B_Answers = 0;
//                                        var C_Answers = 0;
//                                        var D_Answers = 0;
//                                        $.each( data, function( key, val ) {
//                                            if(key=="A")A_Answers=parseInt(val);
//                                            if(key=="B")B_Answers=parseInt(val);
//                                            if(key=="C")C_Answers=parseInt(val);
//                                            if(key=="D")D_Answers=parseInt(val);
//                                        });
//
//                                        series.setData([A_Answers, B_Answers,C_Answers,D_Answers],true,false,true);
//                                        console.log("GOODBYE!!!");
//                                    });
                                }, 1000);
                            }
                        }
                    },
                    title: {
                        text: 'Answers to Question'
                    },
                    xAxis: {
                        labels: {
                            style: {
                                color: 'red',
                                fontSize:'50px'
                            }
                        },
                        categories: [
                            'A',
                            'B',
                            'C',
                            'D',
                        ],
                    },
                    yAxis: {
                        title: {
                            style: {
                                color: 'green',
                                fontSize:'20px'
                            },
                            text: 'Hoppys with Answer'
                        },
                        allowDecimals: false,
                        plotLines: [{
                            value: 0,
                            width: 1,
                            color: '#808080'
                        }]
                    },

                    legend: {
                        enabled: false
                    },
                    exporting: {
                        enabled: false
                    },
                    series: [{
                        name: 'Choices',
                        data: []

                    }]
                });
            });
        });
    </script>